@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 
 * MONEX DESIGN SYSTEM
 * Based on Apple HIG + Revolut principles
 * Rules: Calm, Clean, Consistent
 */

@layer base {
  :root {
    /* Core Colors - Neutral background with ONE accent */
    --background: 0 0% 98%;
    --foreground: 222 47% 11%;
    
    /* Card - Pure white for elevation */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    
    /* Primary - Single accent color */
    --primary: 217 91% 50%;
    --primary-foreground: 0 0% 100%;
    
    /* Secondary - Soft gray for backgrounds */
    --secondary: 220 14% 96%;
    --secondary-foreground: 220 9% 46%;
    
    /* Muted - For secondary text */
    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;
    
    /* Accent - Subtle primary tint */
    --accent: 217 91% 97%;
    --accent-foreground: 217 91% 47%;
    
    /* Semantic Colors - Red = danger, Green = success ONLY */
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --expense: 0 72% 51%;
    --income: 142 76% 36%;
    
    /* Borders & Inputs */
    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 217 91% 50%;
    
    /* Radius System - Premium 16-20px */
    --radius-sm: 0.875rem;   /* 14px - Small elements */
    --radius: 1rem;          /* 16px - Standard cards */
    --radius-md: 1.125rem;   /* 18px - Standard cards (between) */
    --radius-lg: 1.25rem;    /* 20px - Hero cards, large elements */
    --radius-xl: 1.5rem;     /* 24px - Bottom sheets, modals */
    
    /* Shadows - Premium soft shadows */
    --shadow-subtle: 0 1px 2px 0 rgb(0 0 0 / 0.03);
    --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.04), 0 1px 2px -1px rgb(0 0 0 / 0.04);
    --shadow-elevated: 0 4px 12px -2px rgb(0 0 0 / 0.06);
    --shadow-modal: 0 12px 24px -4px rgb(0 0 0 / 0.08);
    
    /* Safe areas for mobile */
    --safe-area-top: env(safe-area-inset-top, 0px);
    --safe-area-bottom: env(safe-area-inset-bottom, 0px);
    
    /* Bottom navigation height constant */
    --tab-bar-height: 88px;
    
    /* Spacing Scale - Premium (8, 12, 16, 20, 24, 32) */
    --space-xs: 0.5rem;   /* 8px - Tight spacing */
    --space-sm: 0.75rem;  /* 12px - Card internal spacing */
    --space-md: 1rem;     /* 16px - Standard padding, gap between cards */
    --space-md-lg: 1.25rem; /* 20px - Screen edge padding */
    --space-lg: 1.5rem;   /* 24px - Section spacing */
    --space-xl: 2rem;     /* 32px - Large spacing */
    
    /* Typography - Premium strict hierarchy */
    --text-display: 2rem;        /* 32px - Hero numbers (balance) */
    --text-large-title: 1.75rem; /* 28px - Screen purpose */
    --text-title: 1.125rem;      /* 18px - Section name */
    --text-body: 0.9375rem;      /* 15px - Primary content */
    --text-caption: 0.8125rem;   /* 13px - Secondary info */

    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
  }

  .dark {
    /* Premium dark mode - Not pure black, sophisticated dark gray */
    --background: 222 47% 8%;
    --foreground: 210 40% 98%;
    --card: 222 47% 11%;
    --card-foreground: 210 40% 98%;
    --popover: 222 47% 11%;
    --popover-foreground: 210 40% 98%;
    --primary: 217 91% 60%;
    --primary-foreground: 222 47% 8%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;
    --accent: 217 33% 20%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62% 55%;
    --destructive-foreground: 210 40% 98%;
    --expense: 0 62% 58%;
    --income: 142 70% 48%;
    --border: 217 33% 20%;
    --input: 217 33% 20%;
    --ring: 217 91% 60%;
    
    /* Softer shadows in dark mode */
    --shadow-subtle: 0 1px 2px 0 rgb(0 0 0 / 0.2);
    --shadow-card: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
    --shadow-elevated: 0 4px 12px -2px rgb(0 0 0 / 0.4);
    --shadow-modal: 0 12px 24px -4px rgb(0 0 0 / 0.5);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  html, body, #root {
    @apply bg-background text-foreground antialiased;
    height: 100%;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior-y: contain;
  }

  #root {
    overflow-x: hidden;
    overflow-y: auto;
    min-height: 100dvh;
  }
  
  /* Prevent iOS zoom */
  input, textarea, select {
    font-size: 16px !important;
  }
}

@layer components {
  /* ================================
   * CARD SYSTEM - Core of the design
   * Rules: radius 16-20, padding 16, spacing 12-16, no borders
   * ================================ */
  
  /* Hero Card: Premium hero display */
  .card-hero {
    @apply bg-card p-4 rounded-[var(--radius-lg)];
    box-shadow: var(--shadow-elevated);
    padding: var(--space-md);
  }
  
  /* Info Card: Big number + small label */
  .card-info {
    @apply bg-card p-4 rounded-[var(--radius-md)];
    box-shadow: var(--shadow-card);
  }
  
  .card-info-number {
    font-size: var(--text-large-title);
    font-weight: 600;
    line-height: 1.2;
    @apply text-foreground;
  }
  
  .card-hero-number {
    font-size: var(--text-display);
    font-weight: 600;
    line-height: 1.1;
    letter-spacing: -0.02em;
    @apply text-foreground;
  }
  
  .card-info-label {
    font-size: var(--text-caption);
    @apply text-muted-foreground mt-1;
  }
  
  /* Insight Card: 1 sentence + optional emoji */
  .card-insight {
    @apply bg-card p-4 rounded-[var(--radius-md)] flex items-center gap-3;
    box-shadow: var(--shadow-card);
  }
  
  .card-insight-text {
    font-size: var(--text-body);
    @apply text-foreground;
  }
  
  /* Action Card: Short sentence + 1-2 buttons */
  .card-action {
    @apply bg-card p-4 rounded-[var(--radius-md)];
    box-shadow: var(--shadow-card);
  }
  
  .card-action-text {
    font-size: var(--text-body);
    @apply text-foreground mb-3;
  }
  
  .card-action-buttons {
    @apply flex gap-2;
  }
  
  /* Elevated card for primary content */
  .card-elevated {
    @apply bg-card p-4 rounded-[var(--radius-md)];
    box-shadow: var(--shadow-elevated);
  }
  
  /* ================================
   * TYPOGRAPHY HIERARCHY - Strict
   * Large Title: 28px - Screen purpose
   * Title: 18px - Section name
   * Body: 15px - Content
   * Caption: 13px - Secondary
   * ================================ */
  
  .text-large-title {
    font-size: var(--text-large-title);
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.02em;
  }
  
  .text-title {
    font-size: var(--text-title);
    font-weight: 600;
    line-height: 1.3;
  }
  
  .text-body {
    font-size: var(--text-body);
    font-weight: 400;
    line-height: 1.4;
  }
  
  .text-body-medium {
    font-size: var(--text-body);
    font-weight: 500;
    line-height: 1.4;
  }
  
  .text-caption {
    font-size: var(--text-caption);
    font-weight: 400;
    line-height: 1.4;
    @apply text-muted-foreground;
  }
  
  /* Display number - hero numbers (balance) */
  .text-display {
    font-size: var(--text-display);
    font-weight: 600;
    line-height: 1.1;
    letter-spacing: -0.02em;
    @apply text-foreground;
  }
  
  /* ================================
   * SPACING - Use only 8, 12, 16, 24, 32
   * ================================ */
  
  .gap-xs { gap: var(--space-xs); }
  .gap-sm { gap: var(--space-sm); }
  .gap-md { gap: var(--space-md); }
  .gap-lg { gap: var(--space-lg); }
  .gap-xl { gap: var(--space-xl); }
  
  .p-card { padding: var(--space-md); }
  .mb-section { margin-bottom: var(--space-lg); }
  
  /* ================================
   * BUTTONS - Clear, Short
   * ================================ */
  
  .btn-primary {
    @apply bg-primary text-primary-foreground font-medium px-4 py-2.5 rounded-xl;
    @apply transition-opacity duration-150 active:opacity-80;
  }
  
  .btn-secondary {
    @apply bg-secondary text-foreground font-medium px-4 py-2.5 rounded-xl;
    @apply transition-opacity duration-150 active:opacity-80;
  }
  
  .btn-ghost {
    @apply text-muted-foreground font-medium px-4 py-2.5 rounded-xl;
    @apply transition-opacity duration-150 active:opacity-60;
  }
  
  /* ================================
   * BOTTOM NAVIGATION
   * Rules: Icon + label only, selected = subtle tint
   * ================================ */
  
  .bottom-nav {
    @apply fixed bottom-0 inset-x-0 z-50;
    padding-bottom: max(var(--safe-area-bottom), 8px);
    background: hsl(var(--card) / 0.98);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow: 0 -1px 0 hsl(var(--border) / 0.5);
  }
  
  .bottom-nav-item {
    @apply flex flex-col items-center gap-1 py-2 px-4;
    @apply text-muted-foreground transition-colors duration-150;
  }
  
  .bottom-nav-item.active {
    @apply text-primary;
  }
  
  .bottom-nav-item-icon {
    @apply w-6 h-6;
  }
  
  .bottom-nav-item-label {
    font-size: 0.625rem;
    font-weight: 500;
  }
  
  /* ================================
   * SCREEN LAYOUT
   * Order: Large Title → Primary Section → Secondary → Empty Space
   * ================================ */
  
  .screen-container {
    @apply bg-background overflow-y-auto;
    height: 100%;
    min-height: 100dvh;
    -webkit-overflow-scrolling: touch;
    padding-top: max(var(--safe-area-top), 16px);
    padding-left: var(--space-md-lg);
    padding-right: var(--space-md-lg);
    padding-bottom: calc(var(--tab-bar-height) + env(safe-area-inset-bottom));
  }
  
  .screen-header {
    padding-top: var(--space-md);
    padding-bottom: var(--space-lg);
    margin-bottom: var(--space-md);
  }
  
  .section-header {
    @apply flex items-center justify-between;
    margin-bottom: var(--space-sm);
  }
  
  .section-title {
    font-size: var(--text-title);
    font-weight: 600;
    @apply text-foreground;
  }
  
  .section-action {
    font-size: var(--text-caption);
    font-weight: 500;
    @apply text-primary;
  }
  
  /* ================================
   * PROGRESS BAR
   * ================================ */
  
  .progress-bar {
    @apply h-2 rounded-full bg-secondary overflow-hidden;
  }
  
  .progress-fill {
    @apply h-full rounded-full transition-all duration-300 ease-out;
    background: hsl(var(--primary));
  }
  
  .progress-fill-danger {
    background: hsl(var(--destructive));
  }
  
  .progress-fill-success {
    background: hsl(var(--income));
  }
  
  /* ================================
   * SEMANTIC COLORS
   * Red = danger only, Green = success only
   * ================================ */
  
  .amount-expense {
    color: hsl(var(--expense));
  }
  
  .amount-income {
    color: hsl(var(--income));
  }
  
  /* ================================
   * ANIMATIONS - iOS-approved only
   * Fade in/out, Slide up/down, Micro tap feedback
   * NO bounce, elastic, overshoot
   * ================================ */
  
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slide-up {
    from { transform: translateY(8px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  
  .animate-fade-in {
    animation: fade-in 0.2s ease-out;
  }
  
  .animate-slide-up {
    animation: slide-up 0.2s ease-out;
  }
  
  /* Premium spacing utilities */
  .gap-card {
    gap: 0.875rem; /* 14px - between cards */
  }
  
  .mb-card {
    margin-bottom: 0.875rem; /* 14px - between cards */
  }
  
  /* ================================
   * MODAL
   * ================================ */
  
  .modal-overlay {
    @apply fixed inset-0 z-[100] bg-black/40;
    backdrop-filter: blur(4px);
  }
  
  .modal-content {
    @apply bg-card rounded-t-[var(--radius-xl)] p-4;
    box-shadow: var(--shadow-modal);
    max-height: 80vh;
    overflow-y: auto;
    padding-bottom: calc(var(--space-xl) + var(--safe-area-bottom));
    margin-bottom: 0;
  }
  
  /* Centered modal (for dialogs that need to be above bottom nav) */
  .modal-centered {
    @apply bg-card rounded-[var(--radius-xl)] p-4 mx-4;
    box-shadow: var(--shadow-modal);
    max-height: 70vh;
    overflow-y: auto;
    margin-bottom: calc(100px + var(--safe-area-bottom));
  }
  
  /* ================================
   * UTILITIES
   * ================================ */
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* Category icon */
  .category-icon {
    @apply w-10 h-10 rounded-xl flex items-center justify-center text-base;
  }
  
  /* List item with subtle tap */
  .list-item {
    @apply flex items-center gap-3 p-4 bg-card rounded-[var(--radius-md)];
    box-shadow: var(--shadow-card);
    @apply transition-opacity duration-150 active:opacity-80;
    margin-bottom: var(--space-sm);
  }
  
  /* Quick action */
  .quick-action {
    @apply flex flex-col items-center gap-2 p-4 bg-card rounded-[var(--radius)];
    box-shadow: var(--shadow-card);
    @apply transition-opacity duration-100 active:opacity-80;
  }
  
  /* Input */
  .input-clean {
    @apply w-full px-4 py-3 bg-secondary rounded-xl text-foreground placeholder:text-muted-foreground;
    @apply focus:outline-none focus:ring-2 focus:ring-primary/20;
  }
  
  /* Chip */
  .chip {
    @apply inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium;
    @apply bg-secondary text-secondary-foreground;
  }
  
  .chip-primary {
    @apply bg-primary/10 text-primary;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--border));
  border-radius: 100px;
}
