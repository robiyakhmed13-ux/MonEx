import{b as M,r as d,u as Y,g as b,j as e,a as m,P as L,U as Q,p as x,y as R,A as X,X as $,h as A}from"./index-Bngez1jy.js";import{S as G}from"./share-2-DVT8M0Cz.js";import{T as V}from"./trash-2-DgMVlkGx.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=M("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),se=d.memo(()=>{const{lang:a,currency:w,showToast:y,setActiveScreen:q}=Y(),[f,j]=d.useState(()=>b.get("hamyon_billSplits",[])),[E,p]=d.useState(!1),[h,k]=d.useState(""),[o,S]=d.useState(""),[P,B]=d.useState(""),[l,u]=d.useState([]),[N,v]=d.useState(""),n={title:a==="ru"?"Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÑŒ ÑÑ‡Ñ‘Ñ‚":a==="uz"?"Hisobni bo'lish":"Split Bill",addNew:a==="ru"?"ÐÐ¾Ð²Ñ‹Ð¹ ÑÑ‡Ñ‘Ñ‚":a==="uz"?"Yangi hisob":"New Bill",billTitle:a==="ru"?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ":a==="uz"?"Nomi":"Title",total:a==="ru"?"ÐžÐ±Ñ‰Ð°Ñ ÑÑƒÐ¼Ð¼Ð°":a==="uz"?"Jami summa":"Total Amount",paidBy:a==="ru"?"ÐšÑ‚Ð¾ Ð¿Ð»Ð°Ñ‚Ð¸Ð»":a==="uz"?"Kim to'ladi":"Paid By",participants:a==="ru"?"Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸":a==="uz"?"Ishtirokchilar":"Participants",addParticipant:a==="ru"?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ":a==="uz"?"Qo'shish":"Add",splitEqually:a==="ru"?"Ð Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÑŒ Ð¿Ð¾Ñ€Ð¾Ð²Ð½Ñƒ":a==="uz"?"Teng bo'lish":"Split Equally",save:a==="ru"?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ":a==="uz"?"Saqlash":"Save",noBills:a==="ru"?"ÐÐµÑ‚ ÑÑ‡ÐµÑ‚Ð¾Ð²":a==="uz"?"Hisoblar yo'q":"No bills yet",owes:a==="ru"?"Ð´Ð¾Ð»Ð¶ÐµÐ½":a==="uz"?"qarz":"owes",paid:a==="ru"?"ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½Ð¾":a==="uz"?"To'landi":"Paid",pending:a==="ru"?"ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚":a==="uz"?"Kutilmoqda":"Pending",settled:a==="ru"?"ÐŸÐ¾Ð³Ð°ÑˆÐµÐ½":a==="uz"?"To'langan":"Settled",share:a==="ru"?"ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ":a==="uz"?"Ulashish":"Share"},C=()=>{k(""),S(""),B(""),u([]),v("")},z=()=>{N.trim()&&(u(t=>[...t,{id:A(),name:N.trim(),amount:0,paid:!1}]),v(""))},F=t=>{u(r=>r.filter(s=>s.id!==t))},U=()=>{if(!o||l.length===0)return;const t=parseFloat(o)/l.length;u(r=>r.map(s=>({...s,amount:Math.round(t)})))},_=(t,r)=>{u(s=>s.map(i=>i.id===t?{...i,amount:r}:i))},D=()=>{var r;if(!h.trim()||!o||l.length===0)return;const t={id:A(),title:h.trim(),totalAmount:parseFloat(o),currency:w,date:new Date().toISOString().slice(0,10),paidBy:P||((r=l[0])==null?void 0:r.name)||"",participants:l,settled:!1};j(s=>{const i=[t,...s];return b.set("hamyon_billSplits",i),i}),y("âœ“",!0),p(!1),C()},H=(t,r)=>{j(s=>{const i=s.map(g=>{if(g.id!==t)return g;const T=g.participants.map(c=>c.id===r?{...c,paid:!c.paid}:c),J=T.every(c=>c.paid);return{...g,participants:T,settled:J}});return b.set("hamyon_billSplits",i),i})},I=t=>{j(r=>{const s=r.filter(i=>i.id!==t);return b.set("hamyon_billSplits",s),s}),y("âœ“",!0)},K=async t=>{const r=`${t.title}
${n.total}: ${x(t.totalAmount,t.currency)}
${n.paidBy}: ${t.paidBy}

${t.participants.map(s=>`${s.name}: ${x(s.amount,t.currency)} ${s.paid?"âœ“":""}`).join(`
`)}`;if(navigator.share)try{await navigator.share({title:t.title,text:r})}catch{}else await navigator.clipboard.writeText(r),y("Copied!",!0)},O=f.filter(t=>!t.settled).reduce((t,r)=>t+r.participants.filter(s=>!s.paid).reduce((s,i)=>s+i.amount,0),0);return e.jsxs("div",{className:"min-h-screen bg-background pb-32 px-4 pt-4",children:[e.jsxs("header",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>q("home"),className:"text-2xl",children:"â†"}),e.jsx("h1",{className:"text-xl font-bold text-foreground",children:n.title})]}),e.jsx(m.button,{whileTap:{scale:.95},onClick:()=>{C(),p(!0)},className:"p-2 rounded-full bg-primary text-primary-foreground",children:e.jsx(L,{className:"w-5 h-5"})})]}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 border border-primary/20 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"w-8 h-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n.pending}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:x(O,w)})]})]})}),f.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("span",{className:"text-4xl block mb-3",children:"ðŸ§¾"}),e.jsx("p",{children:n.noBills})]}):e.jsx("div",{className:"space-y-4",children:f.map((t,r)=>e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},className:`p-4 rounded-2xl border ${t.settled?"bg-muted/50 border-income/20":"bg-card border-border"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.date," â€¢ ",n.paidBy,": ",t.paidBy]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-foreground",children:x(t.totalAmount,t.currency)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.settled?"bg-income/20 text-income":"bg-amber-500/20 text-amber-600"}`,children:t.settled?n.settled:n.pending})]})]}),e.jsx("div",{className:"space-y-2 mb-3",children:t.participants.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-secondary/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>H(t.id,s.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${s.paid?"bg-income text-white":"bg-muted border-2 border-border"}`,children:s.paid&&e.jsx(R,{className:"w-4 h-4"})}),e.jsx("span",{className:`${s.paid?"line-through text-muted-foreground":"text-foreground"}`,children:s.name})]}),e.jsx("span",{className:"font-medium text-foreground",children:x(s.amount,t.currency)})]},s.id))}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-3 border-t border-border",children:[e.jsx("button",{onClick:()=>K(t),className:"p-2 rounded-lg bg-secondary text-foreground",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(t.id),className:"p-2 rounded-lg bg-destructive/20 text-destructive",children:e.jsx(V,{className:"w-4 h-4"})})]})]},t.id))}),e.jsx(X,{children:E&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",onClick:()=>p(!1),children:e.jsxs(m.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},onClick:t=>t.stopPropagation(),className:"bg-background rounded-t-3xl p-6 w-full max-w-lg max-h-[85vh] overflow-y-auto pb-[calc(6rem+80px+env(safe-area-inset-bottom))]",style:{paddingBottom:"calc(1.5rem + 80px + env(safe-area-inset-bottom))"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:n.addNew}),e.jsx("button",{onClick:()=>p(!1),className:"p-2",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:n.billTitle}),e.jsx("input",{type:"text",value:h,onChange:t=>k(t.target.value),placeholder:"Dinner, Trip...",className:"w-full p-3 rounded-xl bg-secondary border border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:n.total}),e.jsx("input",{type:"number",value:o,onChange:t=>S(t.target.value),placeholder:"0",className:"w-full p-3 rounded-xl bg-secondary border border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:n.paidBy}),e.jsx("input",{type:"text",value:P,onChange:t=>B(t.target.value),placeholder:"You",className:"w-full p-3 rounded-xl bg-secondary border border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:n.participants}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:N,onChange:t=>v(t.target.value),onKeyDown:t=>t.key==="Enter"&&z(),placeholder:"Name...",className:"flex-1 p-3 rounded-xl bg-secondary border border-border text-foreground"}),e.jsx("button",{onClick:z,className:"p-3 rounded-xl bg-primary text-primary-foreground",children:e.jsx(W,{className:"w-5 h-5"})})]}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 mb-3",children:l.map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex-1 text-foreground",children:t.name}),e.jsx("input",{type:"number",value:t.amount||"",onChange:r=>_(t.id,parseFloat(r.target.value)||0),placeholder:"0",className:"w-24 p-2 rounded-lg bg-secondary border border-border text-foreground text-center"}),e.jsx("button",{onClick:()=>F(t.id),className:"p-2 text-destructive",children:e.jsx($,{className:"w-4 h-4"})})]},t.id))}),e.jsx("button",{onClick:U,className:"w-full p-3 rounded-xl bg-secondary text-foreground font-medium",children:n.splitEqually})]})]}),e.jsx(m.button,{whileTap:{scale:.98},onClick:D,disabled:!h.trim()||!o||l.length===0,className:"w-full p-4 rounded-xl bg-primary text-primary-foreground font-bold disabled:opacity-50",children:n.save})]})]})})})]})});export{se as BillSplitScreen,se as default};
