import{b as g,r as o,i as E,j as e,u as V,g as u,a as l,P as Y,p as I,B as K,w as Q,x as W,y as X,z as Z,A as ee,X as te,D as ae,E as re,H as se,h as ne}from"./index-Bngez1jy.js";import{A as oe}from"./arrow-left-BXUsCCoW.js";import{T as ie}from"./trash-2-DgMVlkGx.js";import{C as le}from"./cloud-3kphkjxs.js";import{S as ce}from"./smartphone-DopFSjjT.js";import{B as de}from"./book-open-B5men4Zq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=g("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=g("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=g("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=g("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),P=[{id:"tv",icon:ae},{id:"music",icon:ye},{id:"cloud",icon:le},{id:"gaming",icon:ue},{id:"phone",icon:ce},{id:"fitness",icon:me},{id:"books",icon:de},{id:"streaming",icon:re},{id:"security",icon:xe},{id:"business",icon:se}],B=o.memo(({iconId:b,className:a})=>{const c=P.find(j=>j.id===b),x=(c==null?void 0:c.icon)||E;return e.jsx(x,{className:a})});B.displayName="SubscriptionIcon";const Ne=o.memo(({openAddForm:b=!1})=>{const{lang:a,currency:c,showToast:x,setActiveScreen:j}=V(),[d,y]=o.useState(()=>u.get("hamyon_subscriptions",[])),[R,m]=o.useState(b),[h,q]=o.useState(null),[p,N]=o.useState(""),[f,v]=o.useState(""),[A,w]=o.useState("monthly"),[M,k]=o.useState(new Date().toISOString().slice(0,10)),[S,C]=o.useState("tv"),[T,z]=o.useState(3),[$,O]=o.useState(!0),s={title:a==="ru"?"Подписки":a==="uz"?"Obunalar":"Subscriptions",addNew:a==="ru"?"Добавить":a==="uz"?"Qo'shish":"Add New",name:a==="ru"?"Название":a==="uz"?"Nomi":"Name",amount:a==="ru"?"Сумма":a==="uz"?"Summa":"Amount",frequency:a==="ru"?"Частота":a==="uz"?"Chastotasi":"Frequency",weekly:a==="ru"?"Еженедельно":a==="uz"?"Haftalik":"Weekly",monthly:a==="ru"?"Ежемесячно":a==="uz"?"Oylik":"Monthly",yearly:a==="ru"?"Ежегодно":a==="uz"?"Yillik":"Yearly",nextBilling:a==="ru"?"След. оплата":a==="uz"?"Keyingi to'lov":"Next Billing",reminder:a==="ru"?"Напоминание":a==="uz"?"Eslatma":"Reminder",daysBefore:a==="ru"?"дней до":a==="uz"?"kun oldin":"days before",save:a==="ru"?"Сохранить":a==="uz"?"Saqlash":"Save",cancel:a==="ru"?"Отмена":a==="uz"?"Bekor":"Cancel",noSubs:a==="ru"?"Нет подписок":a==="uz"?"Obunalar yo'q":"No subscriptions",total:a==="ru"?"Всего в месяц":a==="uz"?"Jami oylik":"Monthly Total",dueSoon:a==="ru"?"Скоро оплата":a==="uz"?"Tez orada to'lov":"Due Soon",active:a==="ru"?"Активные":a==="uz"?"Faol":"Active"},_=o.useMemo(()=>d.filter(t=>t.active).reduce((t,r)=>r.frequency==="weekly"?t+r.amount*4:r.frequency==="yearly"?t+r.amount/12:t+r.amount,0),[d]),D=o.useMemo(()=>{const t=new Date(Date.now()+6048e5).toISOString().slice(0,10),r=new Date().toISOString().slice(0,10);return d.filter(n=>n.active&&n.nextBillingDate>=r&&n.nextBillingDate<=t)},[d]),F=()=>{N(""),v(""),w("monthly"),k(new Date().toISOString().slice(0,10)),C("tv"),z(3),O(!0),q(null)},L=t=>{N(t.name),v(t.amount.toString()),w(t.frequency),k(t.nextBillingDate),C(t.emoji||"tv"),z(t.reminderDays),O(t.autoRenew),q(t.id),m(!0)},H=()=>{if(!p.trim()||!f)return;const t={id:h||ne(),name:p.trim(),amount:parseFloat(f),currency:c,frequency:A,nextBillingDate:M,category:"subscription",emoji:S,active:!0,reminderDays:T,autoRenew:$};y(h?r=>{const n=r.map(i=>i.id===h?t:i);return u.set("hamyon_subscriptions",n),n}:r=>{const n=[t,...r];return u.set("hamyon_subscriptions",n),n}),x("✓",!0),m(!1),F()},U=t=>{y(r=>{const n=r.filter(i=>i.id!==t);return u.set("hamyon_subscriptions",n),n}),x("✓",!0)},G=t=>{y(r=>{const n=r.map(i=>i.id===t?{...i,active:!i.active}:i);return u.set("hamyon_subscriptions",n),n})},J=t=>{const r=new Date(t).getTime()-Date.now();return Math.ceil(r/(1e3*60*60*24))};return e.jsxs("div",{className:"screen-container",children:[e.jsxs("header",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>j("home"),className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center",children:e.jsx(oe,{className:"w-5 h-5 text-foreground"})}),e.jsx("h1",{className:"text-xl font-bold text-foreground",children:s.title})]}),e.jsx(l.button,{whileTap:{scale:.95},onClick:()=>{F(),m(!0)},className:"p-2 rounded-full bg-primary text-primary-foreground",children:e.jsx(Y,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-2xl bg-gradient-to-br from-primary/20 to-primary/5 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(E,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.total})]}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:I(_,c)})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-4 rounded-2xl bg-gradient-to-br from-amber-500/20 to-amber-500/5 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.dueSoon})]}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:D.length})]})]}),D.length>0&&e.jsxs("section",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-3",children:s.dueSoon}),e.jsx("div",{className:"space-y-2",children:D.map(t=>{const r=J(t.nextBillingDate);return e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-3 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center",children:e.jsx(B,{iconId:t.emoji,className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r===0?a==="ru"?"Сегодня":a==="uz"?"Bugun":"Today":r===1?a==="ru"?"Завтра":a==="uz"?"Ertaga":"Tomorrow":`${r} ${a==="ru"?"дней":a==="uz"?"kun":"days"}`})]}),e.jsx("p",{className:"font-bold text-foreground",children:I(t.amount,t.currency)})]},t.id)})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-3",children:s.active}),d.length===0?e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-2xl bg-muted flex items-center justify-center",children:e.jsx(Q,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{children:s.noSubs})]}):e.jsx("div",{className:"space-y-2",children:d.map((t,r)=>e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},className:`p-4 rounded-xl border ${t.active?"bg-card border-border":"bg-muted/50 border-border opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(B,{iconId:t.emoji,className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(W,{className:"w-3 h-3"}),e.jsx("span",{children:t.nextBillingDate}),e.jsx("span",{children:"•"}),e.jsx("span",{children:t.frequency==="weekly"?s.weekly:t.frequency==="yearly"?s.yearly:s.monthly})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-bold text-foreground",children:I(t.amount,t.currency)})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-3 pt-3 border-t border-border",children:[e.jsx("button",{onClick:()=>G(t.id),className:`p-2 rounded-lg ${t.active?"bg-income/20 text-income":"bg-muted text-muted-foreground"}`,children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>L(t),className:"p-2 rounded-lg bg-secondary text-foreground",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>U(t.id),className:"p-2 rounded-lg bg-destructive/20 text-destructive",children:e.jsx(ie,{className:"w-4 h-4"})})]})]},t.id))})]}),e.jsx(ee,{children:R&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:e.jsxs(l.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:t=>t.stopPropagation(),className:"bg-background rounded-3xl p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold",children:h?s.save:s.addNew}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 rounded-full hover:bg-secondary",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Icon"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:P.map(t=>{const r=t.icon;return e.jsx("button",{onClick:()=>C(t.id),className:`p-3 rounded-xl ${S===t.id?"bg-primary/20 border-2 border-primary":"bg-secondary"}`,children:e.jsx(r,{className:`w-6 h-6 ${S===t.id?"text-primary":"text-foreground"}`})},t.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s.name}),e.jsx("input",{type:"text",value:p,onChange:t=>N(t.target.value),placeholder:"Netflix, Spotify...",className:"w-full p-3 rounded-xl bg-secondary border border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s.amount}),e.jsx("input",{type:"number",value:f,onChange:t=>v(t.target.value),placeholder:"0",className:"w-full p-3 rounded-xl bg-secondary border border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s.frequency}),e.jsx("div",{className:"flex gap-2",children:["weekly","monthly","yearly"].map(t=>e.jsx("button",{onClick:()=>w(t),className:`flex-1 p-3 rounded-xl ${A===t?"bg-primary text-primary-foreground":"bg-secondary"}`,children:t==="weekly"?s.weekly:t==="yearly"?s.yearly:s.monthly},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s.nextBilling}),e.jsx("input",{type:"date",value:M,onChange:t=>k(t.target.value),className:"w-full p-3 rounded-xl bg-secondary border border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:s.reminder}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",max:"30",value:T,onChange:t=>z(parseInt(t.target.value)||0),className:"w-20 p-3 rounded-xl bg-secondary border border-border text-foreground text-center"}),e.jsx("span",{className:"text-muted-foreground",children:s.daysBefore})]})]}),e.jsx(l.button,{whileTap:{scale:.98},onClick:H,disabled:!p.trim()||!f,className:"w-full p-4 rounded-xl bg-primary text-primary-foreground font-bold disabled:opacity-50",children:s.save})]})]})})})]})});export{Ne as SubscriptionsScreen,Ne as default};
