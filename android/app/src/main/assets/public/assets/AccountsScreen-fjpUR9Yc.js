import{r as c,u as E,j as t,a as d,p as S,A as I}from"./index-Bngez1jy.js";const J=[{type:"bank",emoji:"ðŸ¦",color:"#4DABF7"},{type:"wallet",emoji:"ðŸ‘›",color:"#BE4BDB"},{type:"cash",emoji:"ðŸ’µ",color:"#51CF66"},{type:"card",emoji:"ðŸ’³",color:"#FF6B6B"},{type:"savings",emoji:"ðŸ·",color:"#FAB005"}],M=c.memo(()=>{const{t:_,lang:a,setActiveScreen:A,currency:f,showToast:b}=E(),[n,C]=c.useState(()=>{const e=localStorage.getItem("hamyon_accounts");return e?JSON.parse(e):[{id:"default",name:a==="uz"?"Asosiy":a==="ru"?"ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹":"Main",type:"wallet",balance:0,currency:f,emoji:"ðŸ‘›",color:"#BE4BDB",isDefault:!0}]}),[N,k]=c.useState(()=>{const e=localStorage.getItem("hamyon_transfers");return e?JSON.parse(e):[]}),[w,m]=c.useState(!1),[z,j]=c.useState(!1),[u,v]=c.useState(null),[r,x]=c.useState({name:"",type:"bank",balance:"",emoji:"ðŸ¦",color:"#4DABF7"}),[s,g]=c.useState({fromId:"",toId:"",amount:"",description:""}),B=c.useMemo(()=>n.reduce((e,l)=>e+l.balance,0),[n]),y=e=>{C(e),localStorage.setItem("hamyon_accounts",JSON.stringify(e))},T=e=>{k(e),localStorage.setItem("hamyon_transfers",JSON.stringify(e))},D=()=>{if(!r.name||!r.balance)return;const e={id:u||Date.now().toString(),name:r.name,type:r.type,balance:Number(r.balance),currency:f,emoji:r.emoji,color:r.color,isDefault:n.length===0};y(u?n.map(l=>l.id===u?e:l):[...n,e]),m(!1),v(null),x({name:"",type:"bank",balance:"",emoji:"ðŸ¦",color:"#4DABF7"}),b("âœ“",!0)},F=()=>{if(!s.fromId||!s.toId||!s.amount||s.fromId===s.toId)return;const e=Number(s.amount),l=n.find(i=>i.id===s.fromId);if(!l||l.balance<e){b(a==="uz"?"Mablag' yetarli emas":a==="ru"?"ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ ÑÑ€ÐµÐ´ÑÑ‚Ð²":"Insufficient funds",!1);return}const p=n.map(i=>i.id===s.fromId?{...i,balance:i.balance-e}:i.id===s.toId?{...i,balance:i.balance+e}:i);y(p);const h={id:Date.now().toString(),fromAccountId:s.fromId,toAccountId:s.toId,amount:e,date:new Date().toISOString().slice(0,10),description:s.description};T([h,...N]),j(!1),g({fromId:"",toId:"",amount:"",description:""}),b("âœ“",!0)},O=e=>{n.length<=1||(y(n.filter(l=>l.id!==e)),b("âœ“",!0))},o={title:a==="uz"?"Hisoblar":a==="ru"?"Ð¡Ñ‡ÐµÑ‚Ð°":"Accounts",total:a==="uz"?"Jami balans":a==="ru"?"ÐžÐ±Ñ‰Ð¸Ð¹ Ð±Ð°Ð»Ð°Ð½Ñ":"Total Balance",add:a==="uz"?"Hisob qo'shish":a==="ru"?"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÑ‡Ñ‘Ñ‚":"Add Account",transfer:a==="uz"?"O'tkazma":a==="ru"?"ÐŸÐµÑ€ÐµÐ²Ð¾Ð´":"Transfer",name:a==="uz"?"Nomi":a==="ru"?"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ":"Name",balance:a==="uz"?"Balans":a==="ru"?"Ð‘Ð°Ð»Ð°Ð½Ñ":"Balance",from:a==="uz"?"Kimdan":a==="ru"?"ÐžÑ‚ÐºÑƒÐ´Ð°":"From",to:a==="uz"?"Kimga":a==="ru"?"ÐšÑƒÐ´Ð°":"To",amount:a==="uz"?"Summa":a==="ru"?"Ð¡ÑƒÐ¼Ð¼Ð°":"Amount",save:a==="uz"?"Saqlash":a==="ru"?"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ":"Save",cancel:a==="uz"?"Bekor":a==="ru"?"ÐžÑ‚Ð¼ÐµÐ½Ð°":"Cancel"};return t.jsxs("div",{className:"screen-container pb-32 safe-top",children:[t.jsxs("div",{className:"px-4 pt-2",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx(d.button,{whileTap:{scale:.9},onClick:()=>A("home"),className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center",children:"â†"}),t.jsx("div",{className:"flex-1",children:t.jsx("h1",{className:"text-title-1 text-foreground",children:o.title})}),t.jsxs(d.button,{whileTap:{scale:.95},onClick:()=>j(!0),className:"btn-secondary text-sm",children:["â†”ï¸ ",o.transfer]})]}),t.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-elevated p-6 mb-6 bg-gradient-to-br from-primary/10 to-primary/5",children:[t.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:o.total}),t.jsx("p",{className:"text-3xl font-bold text-foreground",children:S(B,f)}),t.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[n.length," ",a==="uz"?"hisob":a==="ru"?"ÑÑ‡ÐµÑ‚Ð¾Ð²":"accounts"]})]}),t.jsx("div",{className:"space-y-3 mb-6",children:n.map((e,l)=>t.jsxs(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.05},className:"card-elevated p-4 flex items-center gap-4",onClick:()=>{v(e.id),x({name:e.name,type:e.type,balance:String(e.balance),emoji:e.emoji,color:e.color}),m(!0)},children:[t.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl",style:{backgroundColor:e.color+"20"},children:e.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-foreground",children:e.name}),t.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:e.type})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:`font-bold ${e.balance>=0?"text-income":"text-expense"}`,children:S(e.balance,f)}),e.isDefault&&t.jsx("span",{className:"text-xs text-primary",children:"âœ“ Default"})]})]},e.id))}),t.jsxs(d.button,{whileTap:{scale:.97},onClick:()=>{v(null),x({name:"",type:"bank",balance:"",emoji:"ðŸ¦",color:"#4DABF7"}),m(!0)},className:"w-full py-4 rounded-2xl border-2 border-dashed border-border text-muted-foreground font-medium flex items-center justify-center gap-2",children:["+ ",o.add]}),N.length>0&&t.jsxs("div",{className:"mt-8",children:[t.jsx("h3",{className:"text-title-3 text-foreground mb-4",children:a==="uz"?"So'nggi o'tkazmalar":a==="ru"?"ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹":"Recent Transfers"}),t.jsx("div",{className:"space-y-2",children:N.slice(0,5).map(e=>{const l=n.find(h=>h.id===e.fromAccountId),p=n.find(h=>h.id===e.toAccountId);return t.jsxs("div",{className:"p-3 rounded-xl bg-secondary flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:(l==null?void 0:l.emoji)||"?"}),t.jsx("span",{className:"text-muted-foreground",children:"â†’"}),t.jsx("span",{className:"text-lg",children:(p==null?void 0:p.emoji)||"?"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-foreground",children:e.description||"Transfer"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:e.date})]}),t.jsx("p",{className:"font-semibold text-foreground",children:S(e.amount,f)})]},e.id)})})]})]}),t.jsx(I,{children:w&&t.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"modal-overlay",onClick:()=>m(!1),children:t.jsxs(d.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"absolute bottom-0 left-0 right-0 modal-content safe-bottom",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"text-title-2 text-foreground mb-4",children:u?a==="uz"?"Tahrirlash":a==="ru"?"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ":"Edit":o.add}),t.jsx("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2",children:J.map(e=>t.jsxs("button",{onClick:()=>x({...r,type:e.type,emoji:e.emoji,color:e.color}),className:`px-4 py-3 rounded-xl flex flex-col items-center gap-1 min-w-[70px] transition-all ${r.type===e.type?"bg-primary text-primary-foreground":"bg-secondary"}`,children:[t.jsx("span",{className:"text-xl",children:e.emoji}),t.jsx("span",{className:"text-xs capitalize",children:e.type})]},e.type))}),t.jsx("input",{type:"text",placeholder:o.name,value:r.name,onChange:e=>x({...r,name:e.target.value}),className:"w-full p-4 mb-3 rounded-xl bg-secondary text-foreground placeholder:text-muted-foreground"}),t.jsx("input",{type:"text",inputMode:"numeric",placeholder:o.balance,value:r.balance,onChange:e=>x({...r,balance:e.target.value.replace(/[^0-9.-]/g,"")}),className:"w-full p-4 mb-4 rounded-xl bg-secondary text-foreground placeholder:text-muted-foreground"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>m(!1),className:"btn-secondary flex-1",children:o.cancel}),t.jsx("button",{onClick:D,className:"btn-primary flex-1",children:o.save})]}),u&&n.length>1&&t.jsx("button",{onClick:()=>{O(u),m(!1)},className:"w-full mt-3 py-3 text-expense font-medium",children:a==="uz"?"O'chirish":a==="ru"?"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ":"Delete"})]})})}),t.jsx(I,{children:z&&t.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"modal-overlay",onClick:()=>j(!1),children:t.jsxs(d.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"absolute bottom-0 left-0 right-0 modal-content safe-bottom",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"text-title-2 text-foreground mb-4",children:o.transfer}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:o.from}),t.jsxs("select",{value:s.fromId,onChange:e=>g({...s,fromId:e.target.value}),className:"w-full p-4 rounded-xl bg-secondary text-foreground",children:[t.jsx("option",{value:"",children:"--"}),n.map(e=>t.jsxs("option",{value:e.id,children:[e.emoji," ",e.name]},e.id))]})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:o.to}),t.jsxs("select",{value:s.toId,onChange:e=>g({...s,toId:e.target.value}),className:"w-full p-4 rounded-xl bg-secondary text-foreground",children:[t.jsx("option",{value:"",children:"--"}),n.filter(e=>e.id!==s.fromId).map(e=>t.jsxs("option",{value:e.id,children:[e.emoji," ",e.name]},e.id))]})]}),t.jsx("input",{type:"text",inputMode:"numeric",placeholder:o.amount,value:s.amount,onChange:e=>g({...s,amount:e.target.value.replace(/[^0-9]/g,"")}),className:"w-full p-4 mb-4 rounded-xl bg-secondary text-foreground placeholder:text-muted-foreground"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>j(!1),className:"btn-secondary flex-1",children:o.cancel}),t.jsx("button",{onClick:F,className:"btn-primary flex-1",children:o.transfer})]})]})})})]})});M.displayName="AccountsScreen";export{M as AccountsScreen};
